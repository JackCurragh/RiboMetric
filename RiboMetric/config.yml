argument:
  # Arguments, config values are overwritten when called in the command-line
  bam: null                   # Filepath for bam
  annotation: null            # Filepath for annotation
  gff: null                   # Filepath for gff
  fasta: null                 # Filepath for fasta
  json_in: null               # Filepath for JSON input
  json_config: False          # Use JSON config instead of this config for generating plots
  name: null                  # Sets the name for the reports and/or data output, when set to None, uses bam filename
  output: "."                 # Sets the output directory for the reports and/or data output
  threads: 8                  # Number of threads used by RiboMetric
  subsample: null             # Number of reads processed from the bam file, null being the entire file
  transcripts: null           # Number of transcripts processed from a gff file, null being the entire file
  html: True                  # Output HTML report
  pdf: False                  # Output PDF report
  json: False                 # Output results as JSON
  csv: False                  # Output metrics as CSV
  offset_calculation_method: "ribowaltz"

plots:
  # Controls general plot theming and specific plot options
  font_family: Helvetica Neue,Helvetica,Arial,sans-serif
  base_color: '#7f7f7f'
  nucleotide_colors: {"A": "#c93434", "C": "#2e85db", "G": "#f0de1f", "T": "#1fc24d"}
  image_size: [720, 370]      # [Width, Height] in pixels, used for pdf images
  terminal_nucleotide_bias_distribution:
    nucleotide_count: 2       # Size of nucleotide groups to check (default = 2)
    target: "both"            # Options: ["five_prime", "three-prime", "both"]
    include_N: False          # Show nucleotide groups with N in plot
    background_freq: True     # Use background frequency of nucleotide groups in reads to check ligation bias
  nucleotide_proportion:
    nucleotide_start: 0
    nucleotide_count: 15
  read_frame_distribution:
    upper_limit: 40
    lower_limit: 15
    show_scores: "all"        # Options: ["all", "global", "none"]
  mRNA_distribution:
    upper_limit: 50
    lower_limit: 10
    absolute_counts: False    # Options for both?
  mRNA_read_breakdown:
    upper_limit: 50
    lower_limit: 10
    absolute_counts: False
    plotting_order: ['five_leader', 'start_codon', 'CDS', 'stop_codon', 'three_trailer']
  metagene_profile:
    distance_target: "both"   # Options: ["start", "stop", "both"]
    shared_yaxis: False       # For the metagene profile barplot, controls whether the start and stop distance share a y-axis or not
    distance_range: [-50,50]  # Set the max distance to count reads from the target(s)
    colorscale: "blues"    # Heatmap colorscale, see https://plotly.com/python/builtin-colorscales/
    max_colorscale: null      # if set to null, the plot will generate with relative counts (0 to 1)
  exclude_metrics: ['ratio_leader:trailer_global', 'prop_reads_leader_global', 'prop_reads_trailer_global']
    
qc:
  use_cds_subset:
  # Defines which modules use only reads that are on cds
  # If False, uses all reads
    read_frame_distribution: True
  read_frame_distribution:
    3nt_count_cutoff: 0.05
    exclude_codons: 9          # Exclude this many nt around CDS start/stop (triplet boundary noise). 9 = 3 codons
    # Optional selection of read lengths contributing to global periodicity metrics
    # periodicity_top_n: 5        # Keep top-N read lengths by mass (commented = disabled)
    # periodicity_mass_threshold: 0.8  # Keep minimal set of lengths covering this fraction of reads (disabled by default)
    # psite_min_prominence: 1.5   # Minimum peak/median ratio to accept a P-site offset (fallback to consensus otherwise)
  cds_coverage:
    in_frame_coverage: True   # Only check in-frame coverage, otherwise check complete cds coverage

metrics:
  # Control which metrics are calculated
  # Default metrics are the standard Ribo-Seq QC metrics expected by users
  # Optional metrics are more theoretical/experimental approaches

  # DEFAULT METRICS (always calculated)
  default:
    # Read length distribution
    - read_length_distribution_IQR
    - read_length_distribution_coefficient_of_variation
    - read_length_distribution_maxprop

    # Terminal nucleotide bias
    - terminal_nucleotide_bias_KL_5prime
    - terminal_nucleotide_bias_KL_3prime
    - terminal_nucleotide_bias_max_absolute_5prime
    - terminal_nucleotide_bias_max_absolute_3prime

    # Periodicity - frame dominance is the standard metric
    - periodicity_dominance
    - periodicity_information  # Information content approach

    # Uniformity - entropy is interpretable and standard
    - uniformity_entropy

    # Coverage and regional distribution
    - CDS_coverage
    - region_ratios
    - region_proportions

  # OPTIONAL METRICS (only calculated if enabled via --enable-optional-metrics or --enable-metric)
  optional:
    # Enable to build P-site aligned metagene for spectral metrics
    - periodicity_psite_aligned
    # Additional read length metrics
    - read_length_distribution_bimodality
    - read_length_distribution_normality

    # Alternative periodicity metrics (more theoretical)
    - periodicity_autocorrelation
    - periodicity_fourier
    - periodicity_trips_viz

    # Alternative uniformity metrics (more theoretical)
    - uniformity_autocorrelation
    - uniformity_theil_index
    - uniformity_gini_index
    # Spectral metrics can optionally use P-site aligned metagenes
    # (controlled by qc.periodicity.use_psite_aligned below)
    # - periodicity_autocorr_psite
    # - periodicity_fourier_psite

periodicity:
  use_psite_aligned: true  # When available, use P-site aligned metagene for autocorr/Fourier

# Commented out metrics here will not appear in the summary scores plot
max_mins: # max mins from simulations for each metric github.com/JackCurragh/MetricAnalysis
  # periodicity_autocorrelation: [0, 4.552344]
  periodicity_fourier: [0, 1]
  # periodicity_information: [0, 0.913217]
  # periodicity_information_weighted: [0, 0.913217]
  # periodicity_trips-viz: [0, 1]
  periodicity_dominance: [0, 1]
  # uniformity_autocorrelation: [0, 1]
  uniformity_entropy: [0, 1]
  # uniformity_theil_index: [0, 45]
  # uniformity_gini_index: [0, 1]
  prop_reads_CDS: [0, 1]
  prop_reads_leader: [0, 1]
  prop_reads_trailer: [0, 1]
  # Legacy bias metric names (kept for compatibility)
  terminal_nucleotide_bias_distribution_5_prime: [0, 1]
  terminal_nucleotide_bias_distribution_3_prime: [0, 1]
  # Consolidated bias metric names
  terminal_bias_kl_5prime: [0, 1]
  terminal_bias_kl_3prime: [0, 1]
  # Optional: max-abs bias consolidated names
  terminal_bias_maxabs_5prime: [0, 1]
  terminal_bias_maxabs_3prime: [0, 1]
  # Consolidated CDS coverage key
  cds_coverage: [0, 1]
  # terminal_nucleotide_bias_max_absolute_metric_5_prime: [0, 1]
  # terminal_nucleotide_bias_max_absolute_metric_3_prime: [0, 1]
  read_length_distribution_IQR: [0, 1]
  # read_length_distribution_bimodality: [0, 1]
  # read_length_distribution_normality: [0, 1]
  # read_length_distribution_coefficient_of_variation: [0, 1]
  # read_length_distribution_maxprop: [0, 1]
